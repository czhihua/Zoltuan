"use strict";$(function(){var t,n;function i(n){var a=JSON.parse(n).data,t=a.map(function(n){return" <li data-id='"+n.id+'\'>\n                            <a href="javascript:;">\n                                \x3c!-- 商品图片 --\x3e\n                                <div class="gn-pic">\n                                    <img src="img/'+n.pic+'" alt="">\n                                </div>\n                                \x3c!-- 商品概要 --\x3e\n                                <div class="gn-brief">\n                                    \x3c!-- 名字 --\x3e\n                                    <p class="gn-name">'+n.goodsName+'</p>\n                                    <p class="gn-intro">'+n.intro+'</p>\n                                    \x3c!-- 价格购买 --\x3e\n                                    <div class="gn-detail">\n                                        <div class="detail-left">\n                                            <span class="gn-current">￥'+n.current+'</span>\n                                            <span class="gn-original">￥'+n.original+'</span>\n                                            <span class="gn-save">立省'+1*(n.original-n.current)+'</span>\n                                        </div>\n                                        <span class="gn-btn">\n                                            马上抢\n                                        </span>\n                                    </div>\n                                </div>\n                                \x3c!-- 倒计时时间 --\x3e\n                                <div class="gn-time">\n                                    <span>剩余：\n                                        <em>00</em>天\n                                        <em>00</em>时\n                                        <em>00</em>分\n                                        <em>00</em>秒</span>\n                                </div>\n                            </a>\n                        </li>'}).join("");$("#goods-nav").html(t),setInterval(function(){for(var n=(new Date).getTime(),t=0;t<a.length;t++){var i=1*a[t].time-n,e=getDuration(i);$("#goods-nav li").eq(t).find(".gn-time").html("\n                                        <span>剩余：\n                                        <em>"+toDB(e[0])+"</em>天\n                                        <em>"+toDB(e[1])+"</em>时\n                                        <em>"+toDB(e[2])+"</em>分\n                                        <em>"+toDB(e[3])+"</em>秒\n                                        </span>\n                                    ")}},1e3)}$(".ht-title").on("click",function(){location.href="index.html"}),function(){var t=$("#slide-box li").eq(0).outerWidth(),n=null,i=0;function e(){i=++i>=$("#slide-box li").length?0:i,$("#slide-box").stop().animate({left:-t*i},800,"linear"),0==i&&$("#slide-box").stop().animate({left:0},200,"linear"),a()}function a(){for(var n="",t=0;t<$("#slide-box li").length;t++)n+="<span></span>";$("#bb-slide .point").html(n),$("#bb-slide .point span").eq(0).attr("class","active"),$("#bb-slide .point span").attr("class",""),$("#bb-slide .point span").eq(i).attr("class","active")}n=setInterval(e,1500),$("#bb-slide").on("mouseover",function(){clearInterval(n)}),$("#bb-slide").on("mouseout",function(){clearInterval(n),n=setInterval(e,1500)}),$("#bb-slide .prev").on("click",function(){i=--i<0?$("#slide-box li").length-1:i,$("#slide-box").stop().animate({left:-t*i},800,"linear"),i==$("#slide-box li").length&&$("#slide-box").stop().animate({left:-t*$("#slide-box li").length},200,"linear"),a()}),$("#bb-slide .next").on("click",function(){e()}),a(),$("#bb-slide .point").on("mouseover","span",function(){var n=$(this).index();$("#slide-box").stop().animate({left:-t*n},800,"linear"),i=n,a()})}(),pullDown("hnav-menu","sub-Menus","onmouseover"),$.ajax({type:"post",url:"api/goodlist.php",data:{dbsql:"quality_goods",page:"",num:""},success:function(n){!function(n){var a=JSON.parse(n).data,t="";t=a.map(function(n){return' <li>\n                                <div class="qb-pic">\n                                    <a href="javascript:;">\n                                        <img src="img/'+n.picture+'" alt="">\n                                        <span>立省'+(1*n.original-1*n.current)+'</span>\n                                    </a>\n                                </div>\n                                <section class="qb-title">\n                                    <a href="javascript:;">'+n.Tradename+'</a>\n                                </section>\n                                <section class="qb-price">\n                                    <span class="qb-p-current">￥'+n.current+'</span>\n                                    <span class="qb-p-original">￥'+n.original+'</span>\n                                </section>\n                                <section class="qb-shop">\n                                    <a href="javascript:;">'+n.shop+'</a>\n                                </section>\n                                <section class="qb-time">\n                                    <p>\n                                        <span>剩余：</span>&nbsp;\n                                        <em>--</em>天\n                                        <em>--</em>时\n                                        <em>--</em>分\n                                        <em>--</em>秒\n                                    </p>\n                                </section>\n                                <a href="javascript:;" id="qb-btn">\n                                    立即抢购\n                                </a>\n                            </li>'}).join(""),$(".qb-slide").html(t),setInterval(function(){for(var n=(new Date).getTime(),t=0;t<a.length;t++){var i=1*a[t].time-n,e=getDuration(i);$(".qb-slide li").eq(t).find(".qb-time").html("<p>\n                                        <span>剩余：</span>\n                                        <em>"+toDB(e[0])+"</em>天\n                                        <em>"+toDB(e[1])+"</em>时\n                                        <em>"+toDB(e[2])+"</em>分\n                                        <em>"+toDB(e[3])+"</em>秒\n                                    </p>")}},1e3),function(){var n=$(".qb-slide li").eq(0).outerWidth(),t=null;function i(){$(".qb-slide").stop().animate({left:-n},800,function(){$(".qb-slide li:first").insertAfter($(".qb-slide li:last")),$(".qb-slide").css("left",0)})}t=setInterval(i,3e3),$(".quality").on("mouseover",function(){clearInterval(t)}),$(".quality").on("mouseout",function(){clearInterval(t),t=setInterval(i,3e3)});var e=!0;$(".quality-title").on("click",".prev",function(){e&&(e=!1,$(".qb-slide li:last").insertBefore($(".qb-slide li:first")),$(".qb-slide").css("left",-n),$(".qb-slide").stop().animate({left:0},600,"linear"),setTimeout(function(){e=!0},800))}),$(".quality-title").on("click",".next",function(){i()})}()}(n)}}),t=$("#today-title").offset().top,$(window).scroll(function(){var n=$(document).scrollTop();t<=n?$("#today-title").attr("class","today-ceiling"):n<t&&$("#today-title").attr("class","")}),$("#today-title .tt-nav").on("click","li",function(){$("#today-title .tt-nav li").find("a").attr("class",""),$(this).find("a").attr("class","active")}),$.ajax({type:"post",url:"api/goodlist.php",data:{dbsql:"rush",page:"1",num:"24"},success:function(n){i(n)}}),$(".tt-default").on("click",function(){$.ajax({type:"post",url:"api/goodlist.php",data:{dbsql:"rush",page:"1",num:"24"},success:function(n){i(n)}}),$("body,html").animate({scrollTop:"1000px"},100)}),$(".tt-newest").on("click",function(){$.ajax({type:"post",url:"api/goodlist.php",data:{dbsql:"rush",page:"1",num:"24"},success:function(n){i(n)}}),$("body,html").animate({scrollTop:"1000px"},100)}),$(".tt-sales").on("click",function(){$.ajax({type:"post",url:"api/sort.php",data:{dbsql:"rush",page:"1",num:"24",sort:"descend",demand:"sales"},success:function(n){i(n)}}),$("body,html").animate({scrollTop:"1000px"},100)}),$(".tt-price").on("click",function(){$.ajax({type:"post",url:"api/sort.php",data:{dbsql:"rush",page:"1",num:"24",sort:"ascend",demand:"current"},success:function(n){i(n)}}),$("body,html").animate({scrollTop:"1000px"},100)}),$(window).scroll(function(){var n=$(window).scrollTop(),t=$("#today-title").offset().top;$("#quality").offset().top,t<=n?($("#widget").css("display","block"),$("#widget").stop().animate({opacity:1},300)):$("#widget").stop().animate({opacity:0},300,function(){$("#widget").css("display","none")})}),$("#widget").click(function(){$("body,html").animate({scrollTop:"0px"},500,"linear")}),(n=window.localStorage.getItem("username"))?($(".ht-login").find("i").text("您好，"+n),$(".ht-login").find("a").css("display","none"),$(".ht-res").css("display","none"),$(".ht-quit").css("display","inline"),$.ajax({type:"post",url:"api/goodlist.php",data:{dbsql:"cart",user:n},success:function(n){var t=JSON.parse(n);$(".ht-nav li:eq(2)").find("a").html("购物车"+t.total1+"件"),$(".qe-cart").find("em").html(t.total1),$(".ht-nav li:eq(2)").on("click",function(){location.href="html/cart.html"}),$(".qe-cart").on("click",function(){location.href="html/cart.html"})}})):($(".ht-login").find("i").text("Hi~欢迎来到Z商城，请"),$(".ht-login").find("a").css("display","inline"),$(".ht-res").css("display","inline"),$(".ht-quit").css("display","none")),$(".sub-Menus li").on("click",function(){var n=$(this).find("a span").attr("data-type");location.href="html/list1.html?type="+n}),$("#gn-more").on("click",function(){location.href="html/list1.html"}),$(".ht-quit").on("click",function(){window.localStorage.clear()}),$(".ht-login a").on("click",function(){var n=window.location.pathname;location.href="html/login.html?"+n}),$("#goods-nav").on("click","li",function(){var n=$(this).attr("data-id");location.href="html/detail.html?id="+n}),$(".qe-cart").on("click",function(){var n=window.location.pathname;location.href="html/login.html?"+n}),$(".ht-nav li:eq(2)").on("click",function(){var n=window.location.pathname;location.href="html/login.html?"+n}),$("#search-text").focus(function(){$(this).val(""),$(this).attr("placeholder","找找你想要的商品")})});