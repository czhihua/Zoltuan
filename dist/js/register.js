"use strict";$(function(){function e(){var n=0;$(document).on("mousemove",function(e){e=e||window.event;var s=$(".follow").offset().left,t=$(".follow").offset().top,a=e.clientX-s,r=e.clientY-t,o=Math.sqrt(a*a+r*r);0<a&&0<r?n=Math.asin(r/o)+90*Math.PI/180:0<a&&(n=Math.asin(a/o)),a<0&&0<r?n=-(Math.asin(r/o)+90*Math.PI/180):a<0&&(n=Math.asin(a/o)),$(".follow").css("transform","rotate("+n+"rad)")})}e(),$(".res-verify").on("mouseover",function(){$(document).off("mousemove"),$(".follow em").css("display","none")}),$(".res-verify").on("mouseout",function(){$(".follow em").css("display","block"),e()}),imgVer({el:'$("#imgVer")',width:"260",height:"160",img:["../img/ver.png","../img/ver-1.png","../img/ver-2.png","../img/ver-3.png"],success:function(){$(".attestation").css({opacity:"0",top:"-999px"}),$(".res-verify").css({background:"#eefff5",border:"1px solid #f2f2f2",color:"#1cd569"}),$(".res-verify").find(".follow-wrap").css("display","none"),$(".res-verify").find(".written").text("验证成功")},error:function(){}}),"on"==$(".res-verify").attr("data-isok")&&$(".res-verify").on("click",function(e){e=e||window.event,$(".attestation").css("display","block"),$(".res-verify").attr("data-isok","off"),$(document).click(function(){$(".attestation").css("display","none"),$(".res-verify").attr("data-isok","on")}),e.stopPropagation()}),$(".res-phone").on("blur",function(){var e=$(".res-phone").val();e?checkReg.tel(e)?($(".res-phone").next(".res-message").css("display","none"),$(".res-phone").attr("data-isok","yes"),$.ajax({type:"post",url:"../api/Username.php",data:{m:"index",val:e},success:function(e){0==JSON.parse(e).code?$(".res-phone").attr("data-isok","yes"):($(".res-phone").next(".res-message").css("display","block"),$(".res-phone").attr("data-isok","no"),$(".res-phone").next(".res-message").text("此号码已被注册"))}})):($(".res-phone").next(".res-message").css("display","block"),$(".res-phone").attr("data-isok","no"),$(".res-phone").next(".res-message").text("请填写有效11位手机号码")):($(".res-phone").next(".res-message").css("display","block"),$(".res-phone").attr("data-isok","no"),$(".res-phone").next(".res-message").text("请填写手机号码"))}),$(".res-psw").on("blur",function(){var e=$(".res-psw").val();e?checkReg.psweasy(e)?($(".res-psw").next(".res-message").css("display","none"),$(".res-psw").attr("data-isok","yes")):($(".res-psw").next(".res-message").css("display","block"),$(".res-psw").attr("data-isok","no"),$(".res-psw").next(".res-message").text("6-16位字母和数字的组合")):($(".res-psw").next(".res-message").css("display","block"),$(".res-psw").attr("data-isok","no"),$(".res-psw").next(".res-message").text("请填写密码"))}),$(".res-psw2").on("blur",function(){var e=$(".res-psw").val(),s=$(".res-psw2").val();s?checkReg.pwwagain(e,s)?($(".res-psw2").next(".res-message").css("display","none"),$(".res-psw2").attr("data-isok","yes")):($(".res-psw2").next(".res-message").css("display","block"),$(".res-psw2").attr("data-isok","no"),$(".res-psw2").next(".res-message").text("两次输入不一致")):($(".res-psw2").next(".res-message").css("display","block"),$(".res-psw2").attr("data-isok","no"),$(".res-psw2").next(".res-message").text("请填写确认密码"))}),$("#register-btn").on("click",function(){"yes"==$(".res-phone").attr("data-isok")&&"验证成功"==$(".res-verify").find(".written").text()&&"yes"==$(".res-psw2").attr("data-isok")&&($(".agreement input").prop("checked")?$.ajax({type:"post",url:"../api/Register.php",data:{m:"insert",val:$(".res-phone").val(),paw:$(".res-psw2").val()},success:function(e){JSON.parse(e)?confirm("注册成功是否跳转至到登录界面")&&(location.href="login.html"):alert("注册失败")}}):alert("请查看用户协议"))})});